@page "/notificaciones"
@using Dominio
@inject ServiciosInterfaz.UsuarioActual UsuarioActual

<h3>Notificaciones</h3>

@if (UsuarioActual.UsuarioLogueado.Notificaciones == null || UsuarioActual.UsuarioLogueado.Notificaciones.Count == 0)
{
    <p>No tiene notificaciones pendientes.</p>
}
else
{
    @foreach (var notificacion in UsuarioActual.UsuarioLogueado.Notificaciones)
    {
        <div class="alert alert-info d-flex justify-content-between align-items-center">
            <span>@notificacion.Mensaje</span>
            <button class="btn-close" type="button" title="Cerrar"
                    @onclick="@(() => EliminarNotificacion(notificacion.Id))">
            </button>
        </div>
    }
}

@code {
    private void EliminarNotificacion(int id)
    {
        try
        {
            UsuarioActual.UsuarioLogueado.BorrarNotificacion(id);
            StateHasChanged(); 
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error al eliminar notificaci√≥n: {ex.Message}");
        }
    }
}