@page "/usuarios"
@inject ServiciosInterfaz.UsuarioActual UsuarioActual
@inject GestorUsuarios GestorUsuarios
@using Dominio
@using Servicios.Gestores

@if (!UsuarioActual.UsuarioLogueado.EsAdministradorSistema)
{
    <p class="text-danger">Acceso denegado. Solo disponible para administradores del sistema.</p>
} <!-- falta que al usuario que no sea admin sistema ni le aparezca esta opcion en el menu-->
else
{
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h3>USUARIOS:</h3>
        <button class="btn btn-dark">Crear nuevo usuario</button>
        <!-- falta funcionalidad para  crear un nuevo usuario-->
    </div>

    <table class="table">
        <thead>
        <tr>
            <th>Nombre</th>
            <th>Apellido</th>
            <th>Email</th>
            <th>Rol</th>
            <th></th>
        </tr>
        </thead>
        <tbody>
        @foreach (Usuario usuario in GestorUsuarios.Usuarios)
        {
            <tr>
                <td>@usuario.Nombre</td>
                <td>@usuario.Apellido</td>
                <td>@usuario.Email</td>
                <td>
                    @if (usuario.EsAdministradorSistema)
                    {
                        <span class="badge bg-warning text-dark">Administrador de sistema</span>
                    }
                    @if (usuario.EsAdministradorProyecto)
                    {
                    <span class="badge bg-info text-dark ms-1">Administrador de proyecto</span>
                    }
                </td>
                <td>
                    @if (!usuario.EsAdministradorSistema)
                    {
                        <button class="btn btn-outline-secondary btn-sm">
                            <i class="bi bi-pencil"></i>
                            <!-- falta que aparezca el icono de lapiz-->
                            <!-- falta funcionalidad para  modificar el usuario-->
                        </button>
                    }
                </td>
            </tr>
        }
        </tbody>
    </table>
}