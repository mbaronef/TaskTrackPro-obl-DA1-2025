@using Servicios.Gestores
@inherits LayoutComponentBase
@inject ServiciosInterfaz.UsuarioActual UsuarioActual
@inject GestorProyectos GestorProyectos

<div class="d-flex">

    <!-- menu -->
    <div class="bg-dark text-white p-3" style="width: 250px; min-height: 100vh;">
        <h4 class="text-white">TaskTrackPro</h4>
        <hr />
        <NavLink class="nav-link text-white" href="/inicio">Inicio</NavLink>

        <div class="mt-3">
            <p class="fw-bold">Proyectos</p>
            @if (UsuarioActual.UsuarioLogueado is not null)
            {
                var proyectos = GestorProyectos.ObtenerProyectosPorUsuario(UsuarioActual.UsuarioLogueado.Id);
                foreach (var proyecto in proyectos)
                {
                    <details class="mb-2">
                        <summary>@proyecto.Nombre</summary>
                        <ul class="list-unstyled ms-3">
                            <li><NavLink href="@($"/proyecto/{proyecto.Id}/diagrama_de_gantt")" class="nav-link text-white">Gantt</NavLink></li>
                            <li><NavLink href="@($"/proyecto/{proyecto.Id}/tareas")" class="nav-link text-white">Tareas</NavLink></li>
                            <li><NavLink href="@($"/proyecto/{proyecto.Id}/recursos_exclusivos")" class="nav-link text-white">Recursos</NavLink></li>
                            <li><NavLink href="@($"/proyecto/{proyecto.Id}/miembros")" class="nav-link text-white">Miembros</NavLink></li>
                        </ul>
                    </details>
                }
            }
        </div>

        <hr />
        <NavLink href="/recursosGenerales" class="nav-link text-white">Recursos Generales</NavLink>
        <NavLink href="/usuarios" class="nav-link text-white">Usuarios</NavLink>
        <NavLink href="/notificaciones" class="nav-link text-white">Notificaciones</NavLink>
    </div>

    <div class="flex-grow-1">
        <div class="d-flex justify-content-end p-2 border-bottom bg-light">
            <NavLink href="/perfil" class="btn btn-outline-secondary me-3">ðŸ‘¤</NavLink>
        </div>
        
        <div class="p-4">
            @Body
        </div>
    </div>
</div>

@code {
}
